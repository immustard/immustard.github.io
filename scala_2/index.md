# Scalaå˜é‡å’Œæ•°æ®ç±»å‹


<!--more-->



## æ³¨é‡Š

Scala çš„æ³¨é‡Šå’Œ Java çš„å®Œå…¨ä¸€æ ·:

```java
// 1. å•è¡Œæ³¨é‡Š

/* 2. å¤šè¡Œæ³¨é‡Š */

/**
 * 3. æ–‡æ¡£æ³¨é‡Š
 */
```



## å˜é‡å’Œå¸¸é‡



### åŸºæœ¬è¯­æ³•

```scala
// var å˜é‡å [: å˜é‡ç±»å‹] = åˆå§‹å€¼
var i: Int = 10
// val å¸¸é‡å [: å¸¸é‡ç±»å‹] = åˆå§‹å€¼
val j: Int = 20
```

> * èƒ½ç”¨å¸¸é‡çš„åœ°æ–¹å°±ä¸è¦ç”¨å˜é‡

> 1. å£°æ˜å˜(å¸¸)é‡æ—¶, ç±»å‹å¯ä»¥çœç•¥, ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼, å³**ç±»å‹æ¨å¯¼**
> 2. ç±»å‹ç¡®å®šå, å°±ä¸èƒ½æ›´æ”¹, å› ä¸º Scala æ˜¯å¼ºæ•°æ®ç±»å‹è¯­éŸ³
> 3. å˜é‡å£°æ˜æ—¶, å¿…é¡»æœ‰åˆå§‹å€¼



## æ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒ



### å‘½åè§„èŒƒ

Scala ä¸­çš„æ ‡è¯†ç¬¦å£°æ˜, **åŸºæœ¬å’ŒJavaæ˜¯ä¸€è‡´çš„**, ä½†æ˜¯ç»†èŠ‚ä¸Šä¼šæœ‰å˜åŒ–: 

1. ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´, åæ¥å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
2. **ä»¥æ“ä½œç¬¦å¼€å¤´, ä¸”åªåŒ…å«æ“ä½œç¬¦(+-*/#!ç­‰)**
3. **ç”¨åå¼•å·\`...\`åŒ…æ‹¬çš„ä»»æ„å­—ç¬¦ä¸², å³ä½¿æ˜¯ Scala å…³é”®å­—(39ä¸ª)ä¹Ÿå¯ä»¥**
   * package, import, class, **object**, **trait**, extends, **with**, type, forSom
   * private, protected, abstract, **sealed**, final, **implicit**, lazy, override
   * try, catch, finally, throw
   * if, else, **match**, case, do, while, for, return, **yield**
   * **def**, **var**, **val**
   * this, super
   * new
   * true, false, null



> çœ‹å‡ ä¸ªç‰¹æ®Šä¸€ç‚¹çš„ğŸŒ°
>
> ```scala
> object Hello {
> 
>   def main(args: Array[String]): Unit = {
>     // ok å› ä¸ºåœ¨ Scala ä¸­ Int æ˜¯é¢„å®šä¹‰çš„å­—ç¬¦, ä¸æ˜¯å…³é”®å­—, ä½†æ˜¯ä¸æ¨è
>     var Int: String = ""
>     // ok å•ç‹¬ä¸€ä¸ªä¸‹åˆ’çº¿ä¸å¯ä½œä¸ºæ ‡è¯†ç¬¦, å› ä¸º _ è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–¹æ³•
>     var _: String = "str"
>     // ä¼šæŠ¥é”™
>     println(_)
> 
>     // ok
>     var -+*/#! : String = ""
>     // error ä»¥æ“ä½œç¬¦å¼€å¦, å¿…éƒ½æ˜¯æ“ä½œç¬¦
>     var -_*/#!1 : String = ""
>       
>     // error
>     var if: String = ""
>     // ok
>     var `if`: String = ""
>   }
>   
> }
> ```



## å­—ç¬¦ä¸²è¾“å‡º



### åŸºæœ¬è¯­æ³•

1. å­—ç¬¦ä¸², é€šè¿‡`+`å·è¿æ¥
2. `printf`ç”¨æ³•: å­—ç¬¦ä¸²ï¼Œé€šè¿‡`%`ä¼ å€¼ã€‚
3. å­—ç¬¦ä¸²æ¨¡æ¿(æ’å€¼å­—ç¬¦ä¸²): é€šè¿‡`$`è·å–å˜é‡å€¼

> æ¥çœ‹çœ‹ğŸŒ°:
>
> ```scala
> object Hello {
> 
>   def main(args: Array[String]): Unit = {
>     val name = "mustard"
>     val age = 18
> 
>     printf("name=%s, age=%d", name, age)
> 
>     /**
>      * å¤šè¡Œå­—ç¬¦ä¸²ï¼Œ åœ¨ Scala ä¸­ï¼Œåˆ©ç”¨ä¸‰ä¸ªåŒå¼•å·åŒ…å›´å¤šè¡Œå­—ç¬¦ä¸²å°±å¯ä»¥å®ç°ã€‚
>      * è¾“å…¥çš„å†…å®¹ï¼Œå¸¦æœ‰ç©ºæ ¼ã€ \t ä¹‹ç±»ï¼Œå¯¼è‡´æ¯ä¸€è¡Œçš„å¼€å§‹ä½ç½®ä¸èƒ½æ•´æ´å¯¹é½ã€‚
>      * åº”ç”¨ scala çš„ stripMargin æ–¹æ³•ï¼Œåœ¨ scala ä¸­ stripMargin é»˜è®¤æ˜¯ "|" ä½œä¸ºè¿æ¥ç¬¦ï¼Œ
>      * åœ¨å¤šè¡Œæ¢è¡Œçš„è¡Œå¤´å‰é¢åŠ ä¸€ä¸ª "|" ç¬¦å·å³å¯ã€‚
>      */
>     val sql1 =
>       """
>         |select
>         |   name
>         |   age
>         |from user
>         |where name = "mustard"
>       """.stripMargin
>     println(sql1)
> 
>     // å¦‚æœéœ€è¦å¯¹å˜é‡è¿›è¡Œè¿ç®—ï¼Œé‚£ä¹ˆå¯ä»¥åŠ  ${}
>     val sql2 =
>       s"""
>          |select
>          |   name
>          |   age
>          |from user
>          |where name = "$name" and age = ${age + 2}
>       """.stripMargin
>     println(sql2)
> 
>     val s = s"name=$name"
>     println(s)
>   }
> 
> }
> ```
>
> 



## æ•°æ®ç±»å‹



### Javaæ•°æ®ç±»å‹

å…ˆæ¥å›é¡¾ä¸€ä¸‹ Java çš„æ•°æ®ç±»å‹: 

1. åŸºæœ¬æ•°æ®ç±»å‹(8ç§): `char`, `byte`, `short`, `int`, `long`, `float`, `double`, `bollean`
2. å¼•ç”¨ç±»å‹: (å¯¹è±¡ç±»å‹)



**ç”±äº Java æœ‰åŸºæœ¬ç±»å‹, å¹¶ä¸”åŸºæœ¬ç±»å‹å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰çš„å¯¹è±¡, æ‰€ä»¥ Java è¯­è¨€å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰çš„é¢å‘å¯¹è±¡**. 

> æ³¨æ„å“ˆ: Java ä¸­åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹æ²¡æœ‰å…±åŒçš„ç¥–å…ˆ



### Scalaæ•°æ®ç±»å‹

1. Scala ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡, **éƒ½æ˜¯`Any`çš„å­ç±»**
2. Scala ä¸­æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»: æ•°å€¼ç±»å‹ (`AnyVal`), å¼•ç”¨ç±»å‹ (`AnyRef`), **ä½†æ˜¯éƒ½æ˜¯å¯¹è±¡**
3. Scala æ•°æ®ç±»å‹ä»ç„¶éµå®ˆ**éšå¼è½¬æ¢** (ä½ç²¾åº¦çš„å€¼å‘é«˜ç²¾åº¦çš„å€¼è‡ªåŠ¨è½¬æ¢)
4. Scala ä¸­çš„`StringOps`æ˜¯å¯¹ Java ä¸­çš„`String`å¢å¼º
5. `Unit`: å¯¹åº” Java ä¸­çš„`void`, ç”¨äºæ–¹æ³•è¿”å›å€¼çš„ä½ç½®, è¡¨ç¤ºæ–¹æ³•æ²¡æœ‰è¿”å›å€¼. `Unit`æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹, åªæœ‰ä¸€ä¸ªå¯¹è±¡å°±æ˜¯`()`. `Void`ä¸æ˜¯æ•°æ®ç±»å‹, åªæ˜¯ä¸€ä¸ªå…³é”®å­—. 
6. `Null`æ˜¯ä¸€ä¸ªç±»å‹, åªæœ‰ä¸€ä¸ªå¯¹è±¡å°±æ˜¯`null`. **å®ƒæ˜¯æ‰€æœ‰å¼•ç”¨ç±»å‹(`AnyRef`)çš„å­ç±»**. 
7. `Nothing`: **æ˜¯æ‰€æœ‰æ•°æ®ç±»å‹çš„å­ç±»**, ä¸»è¦ç”¨åœ¨ä¸€ä¸ªå‡½æ•°æ²¡æœ‰æ˜ç¡®è¿”å›å€¼æ—¶ä½¿ç”¨, å› ä¸ºè¿™æ ·å¯ä»¥æŠŠæŠ›å‡ºçš„è¿”å›å€¼, è¿”å›ç»™ä»»ä½•çš„å˜é‡æˆ–è€…å‡½æ•°. 



#### æ•´æ•°ç±»å‹

| æ•°æ®ç±»å‹   | æè¿°                                                    |
| ---------- | ------------------------------------------------------- |
| `Byte[1]`  | 8ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°. æ•°å€¼åŒºé—´: -128 åˆ° 127                |
| `Short[2]` | 16ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°. æ•°å€¼åŒºé—´: -32768 åˆ° 32767           |
| `Int[4]`   | 32ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°. æ•°å€¼åŒºé—´: -2147483648 åˆ° 2147483647 |
| `Long[8]`  | 64ä½æœ‰ç¬¦å·è¡¥ç æ•´æ•°. æ•°å€¼åŒºé—´: -2^64 åˆ° 2^64-1           |

> Scala çš„æ•´å‹ï¼Œé»˜è®¤ä¸º`Int`å‹ï¼Œå£°æ˜`Long`å‹ï¼Œé¡»ååŠ `l`æˆ–`L`



#### æµ®ç‚¹ç±»å‹

| æ•°æ®ç±»å‹    | æè¿° |
| ----------- | ---- |
| `FLoat[4]`  | 32ä½ |
| `Double[8]` | 64ä½ |

```scala
object TestDataType {
    def main(args: Array[String]): Unit = {
        // è¿™æ˜¯ä¸ª Float
        var n1 = 1.23456789f
        // è¿™æ˜¯ä¸ª Double
        var n2 = 1.23456789
    }
}
```



#### å­—ç¬¦ç±»å‹ (Char)



#### å¸ƒå°”ç±»å‹ (Boolean)

å  1 ä¸ªå­—èŠ‚



#### Unit ç±»å‹ã€Null ç±»å‹å’Œ Nothing ç±»å‹

| æ•°æ®ç±»å‹  | æè¿°                                                         |
| --------- | ------------------------------------------------------------ |
| `Unit`    | è¡¨ç¤ºæ— å€¼, å’Œå…¶ä»–è¯­è¨€ä¸­`void`ç­‰åŒ. ç”¨ä½œä¸è¿”å›ä»»ä½•ç»“æœçš„æ–¹æ³•çš„ç»“æœç±»å‹. `Unit`åªæœ‰ä¸€ä¸ªå®ä¾‹: `()`, ä¸”æ²¡æœ‰å®é™…æ„ä¹‰ |
| `Null`    | `null`, `Null`ç±»å‹åªæœ‰ä¸€ä¸ªå®ä¾‹: `null`. **`Null`å¯ä»¥èµ‹å€¼ç»™ä»»æ„å¼•ç”¨ç±»å‹(AnyRef), ä½†æ˜¯ä¸èƒ½èµ‹å€¼ç»™å€¼ç±»å‹(AnyVal)** |
| `Nothing` | `Nothing`ç±»å‹åœ¨ Scala çš„ç±»å±‚çº§æœ€ä½ç«¯; å®ƒæ˜¯ä»»ä½•å…¶ä»–ç±»å‹çš„å­ç±»å‹. å½“ä¸€ä¸ªå‡½æ•°, ç¡®å®šæ²¡æœ‰æ­£å¸¸çš„è¿”å›å€¼æ—¶, å¯ä»¥ç”¨`Nothing`æ¥æŒ‡å®šè¿”å›ç±»å‹. |

> `Nothing`çš„è¿™ç§æœºåˆ¶æœ‰ä¸€ä¸ªå¥½å¤„: å¯ä»¥æŠŠè¿”å›çš„å€¼(å¼‚å¸¸)èµ‹ç»™å…¶å®ƒçš„å‡½æ•°æˆ–è€…å˜é‡(å…¼å®¹æ€§)

```scala
object TestDataType {
    def main(args: Array[String]): Unit = {
        var cat = new Cat()
        // æ­£ç¡®
        cat = null
        
        // é”™è¯¯
        var n1: Int = null
        
        def test(): Nothing = {
            throw new Exception()
        }
        
        test
    }
}
```



#### ç±»å‹è½¬æ¢

* æ•°å€¼ç±»å‹è‡ªåŠ¨è½¬æ¢: ç²¾åº¦å°çš„ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºç²¾åº¦å¤§çš„æ•°å€¼ç±»å‹. (éšå¼è½¬æ¢)

  `Byte < Short < Int < Long < Float < Double`

   	1. è‡ªåŠ¨æå‡åŸåˆ™: æœ‰å¤šç§ç±»å‹çš„æ•°æ®æ··åˆè¿ç®—æ—¶, é¦–å…ˆ**è‡ªåŠ¨å°†æ‰€æœ‰æ•°æ®è½¬æ¢æˆç²¾åº¦å¤§çš„æ•°æ®ç±»å‹**, ç„¶åå†è®¡ç®—
   	2. **æŠŠç²¾åº¦å¤§çš„æ•°å€¼ç±»å‹èµ‹å€¼ç»™ç²¾åº¦å°çš„æ•°å€¼ç±»å‹æ—¶, ä¼šæŠ¥é”™**
   	3. (`byte`, `short`)å’Œ`char`ä¹‹é—´ä¸ä¼šç›¸äº’è‡ªåŠ¨è½¬æ¢
   	4. `byte`,`short`,`char`ä¸‰è€…å¯ä»¥è®¡ç®—, **ä½†ä¼šå…ˆè½¬æ¢ä¸º`int`ç±»å‹**

* å¼ºåˆ¶ç±»å‹è½¬æ¢

  å¯èƒ½é€ æˆç²¾åº¦é™ä½æˆ–æº¢å‡º, æ‰€ä»¥éœ€è¦ç‰¹åˆ«æ³¨æ„

  ```scala
  var num: Int = 2.7.toInt
  ```

* æ•°å€¼ç±»å‹å’Œ`String`ç±»å‹é—´çš„è½¬æ¢

  * æ•°å€¼ -> `String`: `+ ""`å°±è¡Œ, å’Œ Java ä¸€æ ·
  * `String` -> æ•°å€¼: `s1.toInt`, `s1.toFloat`, `s1.toDouble`, `s1.toByte`, `s1.toLong`, `s1.toShort`

