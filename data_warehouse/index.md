# æ•°æ®ä»“åº“


<!--more-->

## æ•°æ®ä»“åº“çš„åŸºæœ¬æ¦‚å¿µ

### æ¦‚å¿µ

è‹±æ–‡åä¸º**Data Warehouse**, ç®€å†™ä¸º**DW**æˆ–**DWH**. å‡ºç°çš„ç›®çš„æ˜¯*æ„å»ºé¢å‘åˆ†æçš„é›†æˆåŒ–æ•°æ®ç¯å¢ƒ, ä¸ºä¼ä¸šæä¾›å†³ç­–æ”¯æŒ*(Decision Support). å› ä¸ºåˆ†ææ€§æŠ¥å‘Šå’Œå†³ç­–æ”¯æŒç›®çš„è€Œå‡ºç°çš„æŠ€æœ¯. 

ä¹‹æ‰€ä»¥å«åš"**ä»“åº“**"è€Œä¸æ˜¯"**å·¥å‚**"å°±æ˜¯å› ä¸ºDWæœ¬èº«æ˜¯ä¸ç”Ÿäº§æˆ–æ¶ˆè´¹ä»»ä½•æ•°æ®, æ•°æ®æ¥æºäºå¤–éƒ¨, å¹¶ä¸”å¼€æ”¾ç»™å¤–éƒ¨åº”ç”¨. 

### åŸºæœ¬ç‰¹å¾

DWæ˜¯*é¢å‘ä¸»é¢˜çš„, é›†æˆçš„, éæ˜“å¤±çš„*å’Œ*æ—¶å˜çš„*æ•°æ®é›†åˆ, ç”¨ä»¥æ”¯æŒå†³ç­–. 

1. **é¢å‘ä¸»é¢˜**(Subject Oriented)

    åœ¨ä¼ ç»Ÿæ•°æ®åº“ä¸­, æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯é¢å‘åº”ç”¨è¿›è¡Œæ•°æ®çš„ç»„ç»‡, å„ä¸ªç³»ç»Ÿå¯èƒ½æ˜¯ç›¸äº’åˆ†ç¦»çš„, è€Œæ•°æ®ä»“åº“åˆ™æ˜¯é¢å‘ä¸»é¢˜çš„. 

    * æŠ½è±¡ä¸Šæ¥è¯´, ä¸»é¢˜å°±æ˜¯åœ¨è¾ƒé«˜å±‚æ¬¡ä¸Šè®²ä¼ä¸šä¿¡æ¯ç³»ç»Ÿä¸­æ•°æ®è¿›è¡Œç»¼åˆã€å½’ç±»åˆ†æåˆ©ç”¨. æ¯ä¸€ä¸ªä¸»é¢˜åŸºæœ¬å¯¹åº”ä¸€ä¸ªå®è§‚åˆ†æé¢†åŸŸ. 
    * é€»è¾‘ä¸Šæ¥è¯´, ä¸»é¢˜æ˜¯å¯¹åº”ä¼ä¸šä¸­æŸä¸€ä¸ªå®è§‚åˆ†æé¢†åŸŸæ‰€æ¶‰åŠçš„**åˆ†æå¯¹è±¡**. 

2. **é›†æˆçš„**(Integrate)

    é€šè¿‡å¯¹åˆ†æ•£ã€ç‹¬ç«‹ã€å¼‚æ„çš„æ•°æ®åº“æ•°æ®è¿›è¡Œ*æŠ½å–ã€æ¸…ç†ã€è½¬æ¢*å’Œ*æ±‡æ€»*ä¾¿å¾—åˆ°äº†æ•°æ®ä»“åº“çš„æ•°æ®ï¼Œ è¿™æ ·èƒ½ä¿è¯æ•´ä¸ªä¼ä¸šçš„æ•°æ®çš„ä¸€è‡´æ€§, é¿å…äº†äº§ç”Ÿäº†**ä¿¡æ¯å­¤å²›**. 

    æ•°æ®ä»“åº“ä¸­çš„ç»¼åˆæ•°æ®ä¸èƒ½ä»åŸæœ‰çš„æ•°æ®åº“ç³»ç»Ÿç›´æ¥å¾—åˆ°. æ‰€ä»¥åœ¨æ•°æ®è¿›å…¥åˆ°DWä¹‹å‰, å¿…ç„¶è¦ç»è¿‡ç»Ÿä¸€ä¸ç»¼åˆ(æŠ½å–å’Œæ¸…æ´—), è¿™å°±æ˜¯DWå»ºè®¾ä¸­, **æœ€å…³é”®**ã€**æœ€å¤æ‚**çš„ä¸€æ­¥. 

3. **éæ˜“å¤±æ€§**(Non-Volatile)

    éæ˜“å¤±æ€§ä¹Ÿå¯ç§°ä¸ºç¨³å®šæ€§æˆ–ä¸å¯æ›´æ–°æ€§. æ•°æ®ä»“åº“çš„æ•°æ®åæ˜ çš„æ˜¯ç›¸å½“ä¸€æ®µæ—¶é—´å†…çš„**å†å²æ•°æ®çš„å†…å®¹**, æ˜¯ä¸åŒæ—¶ç‚¹çš„æ•°æ®åº“çš„*å¿«ç…§*çš„é›†åˆ, ä»¥åŠåŸºäºè¿™äº›å¿«ç…§è¿›è¡Œç»Ÿè®¡ã€ç»¼åˆå’Œé‡ç»„çš„å¯¼å‡ºæ•°æ®. åŸºäºè¿™ä¸ªç‰¹ç‚¹, DWä¸€èˆ¬æœ‰å¤§é‡çš„æŸ¥è¯¢æ“ä½œ, ä½†ä¿®æ”¹å’Œåˆ é™¤æ“ä½œå¾ˆå°‘. é€šå¸¸åªéœ€è¦å®šæœŸçš„åŠ è½½å’Œæ›´æ–°. 

4. **æ—¶å˜**(Time Variant)

    æ•°æ®ä»“åº“åŒ…å«å„ç§ç²’åº¦çš„å†å²æ•°æ®. è™½ç„¶è¯´DWçš„ç”¨æˆ·ä¸èƒ½ä¿®æ”¹æ•°æ®, ä½†å¹¶ä¸æ˜¯è¯´æ•°æ®ä»“åº“çš„æ•°æ®å°±æ˜¯æ°¸è¿œä¸å˜çš„. åˆ†æçš„ç»“æœåªèƒ½åæ˜ è¿‡å»çš„æƒ…å†µ, å½“ä¸šåŠ¡å˜åŒ–å, æŒ–æ˜å‡ºçš„æ¨¡å¼ä¼šå¤±å»æ—¶æ•ˆæ€§. æ‰€ä»¥è¯´, DWä¸­çš„æ•°æ®éœ€è¦æ›´æ–°, ä»¥é€‚åº”å†³ç­–çš„éœ€è¦. 

    1. DWçš„æ•°æ®æ—¶é™ä¸€èˆ¬è¦è¿œè¿œé•¿äºæ“ä½œå‹æ•°æ®çš„æ•°æ®æ—¶é™. 
    2. æ“ä½œå‹ç³»ç»Ÿå­˜å‚¨çš„æ˜¯å½“å‰çš„æ•°æ®, è€Œæ•°æ®ä»“åº“ä¸­çš„æ•°æ®æ˜¯å†å²æ•°æ®. 
    3. æ•°æ®ä»“åº“ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§æ—¶é—´é¡ºåºè¿½åŠ çš„, å®ƒä»¬éƒ½å¸¦æœ‰æ—¶é—´å±æ€§. 



## æ•°æ®ä»“åº“ä¸æ•°æ®åº“çš„åŒºåˆ«

>  è¿™ä¸¤è€…çš„åŒºåˆ«å…¶å®å°±æ˜¯`OLAP`ä¸`OLTP`çš„åŒºåˆ«. 



* è”æœºäº‹åŠ¡å¤„ç†**OLTP** (On-Line Transaction Processing), ä¹Ÿå¯ä»¥å«åšé¢å‘äº¤æ˜“çš„å¤„ç†ç³»ç»Ÿ. æ˜¯é’ˆå¯¹å…·ä½“ä¸šåŠ¡åœ¨æ•°æ®åº“è”æœºçš„æ—¥å¸¸æ“ä½œ, é€šå¸¸å¯¹å°‘æ•°è®°å½•è¿›è¡ŒæŸ¥è¯¢ã€ä¿®æ”¹. ç”¨æˆ·è¾ƒä¸ºå…³å¿ƒçš„æ˜¯å“åº”æ—¶é—´ã€æ•°æ®çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§å’Œå¹¶å‘æ”¯æŒçš„ç”¨æˆ·æ•°ç­‰é—®é¢˜. ä¾‹å¦‚MySQL, Oracleç­‰å…³ç³»å‹æ•°æ®åº“ä¸€èˆ¬å±äºOLTP

* è”æœºåˆ†æå¤„ç†**OLAP**(On-Line Analytical Processing)ä¸€èˆ¬é’ˆå¯¹æŸäº›ä¸»é¢˜çš„å†å²æ•°æ®è¿›è¡Œåˆ†æ, æ”¯æŒç®¡ç†å†³ç­–. 



é€šè¿‡è¿™ä¸¤ä¸ªçš„å¯¹æ¯”å°±èƒ½å‘ç°, æ•°æ®ä»“åº“çš„å‡ºç°å¹¶ä¸æ˜¯ä¸ºäº†æ›¿ä»£æ•°æ®åº“çš„. 

æ•°æ®åº“è®¾è®¡æ˜¯å°½é‡é¿å…å†—ä½™, ä¸€èˆ¬æ˜¯é’ˆå¯¹æŸä¸€ä¸šåŠ¡è¿›è¡Œè®¾è®¡çš„. **è€Œæ•°æ®ä»“åº“åœ¨è®¾è®¡æ—¶æœ‰æ„å¼•å…¥å†—ä½™, ä¾ç…§åˆ†æéœ€æ±‚ã€åˆ†æç»´åº¦ã€åˆ†ææŒ‡æ ‡è¿›è¡Œè®¾è®¡**. 

> **æ€»çš„æ¥è¯´æ•°æ®åº“æ˜¯ä¸ºäº†æ•è·æ•°æ®è€Œè®¾è®¡, æ•°æ®å­˜åº“æ˜¯ä¸ºäº†åˆ†ææ•°æ®è€Œè®¾è®¡**. 



## æ•°æ®ä»“åº“åˆ†å±‚æ¶æ„

æŒ‰ç…§æ•°æ®æµå…¥æµå‡ºçš„è¿‡ç¨‹, DWæ¶æ„å¯åˆ†ä¸º: **æ•°æ®è¿è¥å±‚ã€æ•°æ®ä»“åº“å±‚ã€æ•°æ®æœåŠ¡å±‚**.



### æ•°æ®è¿è¥å±‚ (ODS)

Operation Data Store æ•°æ®å‡†å¤‡åŒº, ä¹Ÿå«åšè´´æºå±‚, æºæ•°æ®. æ•°æ®ä»“åº“æºå¤´ç³»ç»Ÿçš„æ•°æ®è¡¨é€šå¸¸ä¼šåŸå°ä¸åŠ¨çš„å­˜å‚¨ä¸€ä»½, æ˜¯åç»­æ•°æ®ä»“åº“åŠ å·¥æ•°æ®çš„æ¥æº. 

æ¥æºæ–¹å¼: 

* ä¸šåŠ¡åº“
    * ç»å¸¸ä¼šä½¿ç”¨SQOOPæ¥è¿›è¡ŒæŠ½å–, ğŸŒ°: æ¯å¤©å®šæ—¶æŠ½å–ä¸€æ¬¡
    * å®æ—¶æ–¹é¢, å¯ä»¥è€ƒè™‘ç”¨canal/FlinkCDCç›‘å¬MySQLçš„binlog
* åŸ‹ç‚¹æ—¥å¿—
    * æ—¥å¿—ä¸€èˆ¬æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜, å¯ä»¥ç”¨flumeå®šæ—¶åŒæ­¥
    * å¯ä»¥ç”¨spark streamingæˆ–Flinkå®æ—¶æ¥å…¥
    * kafkaä¹Ÿå¯ä»¥
* æ¶ˆæ¯é˜Ÿåˆ—
    * æ¥è‡ªActiveMQã€Kafkaçš„æ•°æ®.



### æ•°æ®ä»“åº“å±‚ (DW)

DWæ•°æ®åˆ†å±‚, ç”±ä¸‹åˆ°ä¸Šä¸º**DWD, DWB, DWS**. 

* **DWD**:data warehouse details ç»†èŠ‚æ•°æ®å±‚, æ˜¯ä¸šåŠ¡å±‚ä¸æ•°æ®ä»“åº“çš„éš”ç¦»å±‚. ä¸»è¦å¯¹ODSæ•°æ®å±‚åšä¸€äº›**æ•°æ®æ¸…æ´—**(å»é™¤ç©ºå€¼ã€è„æ•°æ®ã€è¶…è¿‡æé™èŒƒå›´çš„)å’Œ**è§„èŒƒåŒ–**çš„æ“ä½œ. 
* **DWB**: data warehouse base æ•°æ®åŸºç¡€å±‚, å­˜å‚¨çš„æ˜¯å®¢è§‚æ•°æ®, ä¸€èˆ¬ç”¨ä½œä¸­é—´å±‚, å¯ä»¥è®¤ä¸ºæ˜¯å¤§é‡æŒ‡æ ‡çš„æ•°æ®å±‚. 
* **DWS**: data warehouse service æ•°æ®æœåŠ¡å±‚, åŸºäºDWBä¸Šçš„åŸºç¡€æ•°æ®, æ•´åˆæ±‡æ€»æˆåˆ†ææŸä¸€ä¸ªä¸»é¢˜åŸŸçš„æœåŠ¡æ•°æ®å±‚, ä¸€èˆ¬æ˜¯å®½è¡¨(å­—æ®µå¤šçš„è¡¨). ç”¨äºæä¾›åç»­çš„ä¸šåŠ¡æŸ¥è¯¢, OLAP, æ•°æ®åˆ†å‘ç­‰. 
    * ç”¨æˆ·è¡Œä¸º, è½»åº¦èšåˆ
    * ä¸»è¦å¯¹ODS/DWDå±‚æ•°æ®åšä¸€äº›è½»åº¦çš„æ±‡æ€»



### æ•°æ®æœåŠ¡å±‚/åº”ç”¨å±‚ (ADS)

application data service åº”ç”¨æ•°æ®æœåŠ¡, è¯¥å±‚ä¸»è¦æ˜¯æä¾›æ•°æ®äº§å“å’Œæ•°æ®åˆ†æä½¿ç”¨çš„æ•°æ®, ä¸€èˆ¬ä¼šå­˜å‚¨åœ¨ESã€mysqlç­‰ç³»ç»Ÿä¸­ä¾›çº¿ä¸Šç³»ç»Ÿä½¿ç”¨

* ä¸€èˆ¬ä¼šå°†å¤§å®½è¡¨, æ¯”å¦‚æŠ¥è¡¨æ•°æ®æ”¾åœ¨è¿™é‡Œ



### ETL

æ•°æ®ä»“åº“ä»å„æ•°æ®æºè·å–æ•°æ®åŠåœ¨æ•°æ®ä»“åº“å†…çš„æ•°æ®è½¬æ¢å’ŒæµåŠ¨éƒ½å¯ä»¥è®¤ä¸ºæ˜¯**ETL**, æ¢å¥è¯è¯´å°±æ˜¯æè¿°æ•°æ®ä»æºç«¯ç»è¿‡**æŠ½å–(Extra)ã€è½¬æ¢(Transfer)ã€åŠ è½½(Load)**åˆ°ç›®çš„ç«¯çš„è¿‡ç¨‹. ETLå°±æ˜¯æ•°æ®ä»“åº“çš„æµæ°´çº¿, è€Œæ•°æ®ä»“åº“æ—¥å¸¸çš„ç®¡ç†å’Œç»´æŠ¤å·¥ä½œçš„å¤§éƒ¨åˆ†ç²¾åŠ›å°±æ˜¯ä¿æŒETLçš„æ­£å¸¸å’Œç¨³å®š. 



### æ•°æ®ä»“åº“åˆ†å±‚çš„ç›®çš„

* **ç”¨ç©ºé—´æ¢æ—¶é—´**: é€šè¿‡å¤§é‡çš„é¢„å¤„ç†æ¥æå‡åº”ç”¨ç³»ç»Ÿçš„ç”¨æˆ·ä½“éªŒ(æ•ˆç‡), å› æ­¤æ•°æ®ä»“åº“ä¼šå­˜åœ¨å¤§é‡å†—ä½™çš„æ•°æ®. å¦‚æœä¸åˆ†å±‚çš„è¯, å¦‚æœæºä¸šåŠ¡ç³»ç»Ÿçš„ä¸šåŠ¡è§„åˆ™å‘ç”Ÿå˜åŒ–å°†ä¼šå½±å“æ•´ä¸ªæ•°æ®æ¸…æ´—è¿‡ç¨‹, å·¥ä½œé‡å·¨å¤§. 
* **ç®€åŒ–æ•°æ®æ¸…æ´—çš„è¿‡ç¨‹**: æŠŠåŸæ¥ä¸€æ­¥çš„å·¥ä½œåˆ†æˆå¤šä¸ªæ­¥éª¤æ¥å®Œæˆ. æ¯ä¸€å±‚çš„å¤„ç†é€»è¾‘éƒ½ç›¸å¯¹ç®€å•å’Œå®¹æ˜“ç†è§£äº†, è¿™æ ·æ¯”è¾ƒå®¹æ˜“ä¿è¯æ¯ä¸ªæ­¥éª¤çš„æ­£ç¡®æ€§. 



## æ•°æ®ä»“åº“å…ƒæ•°æ®çš„ç®¡ç†

> å…ƒæ•°æ®(Meta data), ä¸€å¥è¯å°±èƒ½æ€»ç»“: å…³äºæ•°æ®çš„æ•°æ®. 

æ•°æ®ä»“åº“ä¸­çš„å…ƒæ•°æ®**ä¸»è¦è®°å½•æ•°æ®ä»“åº“ä¸­æ¨¡å‹çš„å®šä¹‰ã€å„å±‚çº§é—´çš„æ˜ å°„å…³ç³»ã€ç›‘æ§æ•°æ®ä»“åº“çš„æ•°æ®çŠ¶æ€åŠETLçš„ä»»åŠ¡è¿è¡ŒçŠ¶æ€. å¹¶ä¸”æ˜¯æ•´ä¸ªæ•°æ®ä»“åº“ç³»ç»Ÿè¿è¡Œçš„åŸºç¡€, å…ƒæ•°æ®æŠŠæ•°æ®ä»“åº“ç³»ç»Ÿä¸­å„ä¸ªæ¾æ•£çš„ç»„ä»¶è”ç³»èµ·æ¥, ç»„æˆä¸€ä¸ªæœ‰æœºçš„æ•´ä½“. **


---

> ä½œè€…:   
> URL: https://buli-home.cn/data_warehouse/  

