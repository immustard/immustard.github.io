# åˆ†å¸ƒå¼ç³»ç»Ÿçš„å•ç‚¹é—®é¢˜


&lt;!--more--&gt;



åˆ†å¸ƒå¼ç³»ç»Ÿçš„å•ç‚¹é—®é¢˜æ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜, å¯åˆ†ä¸ºæ— çŠ¶æ€æœåŠ¡çš„å•ç‚¹é—®é¢˜å’Œæœ‰çŠ¶æ€æœåŠ¡çš„å•ç‚¹é—®é¢˜. 


## æ— çŠ¶æ€æœåŠ¡çš„å•ç‚¹é—®é¢˜

&gt; æ— çŠ¶æ€æœåŠ¡: 
&gt;
&gt; æ— çŠ¶æ€è¯·æ±‚, æœåŠ¡ç«¯æ‰€èƒ½å¤„ç†çš„æ•°æ®å…¨éƒ¨æ¥è‡ªè¯·æ±‚æ‰€æºå¸¦çš„ä¿¡æ¯, æ— çŠ¶æ€æœåŠ¡å¯¹äºŽå®¢æˆ·ç«¯çš„å•æ¬¡è¯·æ±‚, ä¸ä¾èµ–äºŽå…¶å®ƒè¯·æ±‚, å¤„ç†ä¸€æ¬¡è¯·æ±‚çš„ä¿¡æ¯éƒ½åŒ…å«åœ¨è¯¥è¯·æ±‚å†…. æœ€å…¸åž‹çš„å°±æ˜¯ web æœåŠ¡å™¨, æ¯æ¬¡ HTTP è¯·æ±‚å’Œä¹‹å‰çš„éƒ½æ²¡æœ‰å…³ç³», åªæ˜¯èŽ·å–ç›®æ ‡ URL, å¾—åˆ°ç›®æ ‡å†…å®¹, è¿™æ¬¡é“¾æŽ¥å†…å®¹å°±è¢«æ€æ­»äº†. 

å¯¹äºŽæ— çŠ¶æ€çš„æœåŠ¡, å•ç‚¹é—®é¢˜çš„è§£å†³æ¯”è¾ƒç®€å•, å› ä¸ºæœåŠ¡æ˜¯æ— çŠ¶æ€çš„, æ‰€ä»¥æœåŠ¡èŠ‚ç‚¹å¾ˆå®¹æ˜“è¿›è¡Œå¹³è¡Œæ‰©å±•. ðŸŒ°, åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­, ä¸ºäº†é™ä½Žå„è¿›ç¨‹é€šä¿¡çš„ç½‘ç»œç»“æž„çš„å¤æ‚åº¦, æˆ‘ä»¬ä¼šå¢žåŠ ä»£ç†èŠ‚ç‚¹, ä¸“é—¨åšæ¶ˆæ¯çš„è½¬å‘, å…¶ä»–çš„ä¸šåŠ¡ç›´æŽ¥è¿›è¡Œå’Œä»£ç†èŠ‚ç‚¹çš„é€šä¿¡, ç±»ä¼¼ä¸€ä¸ªæ˜Ÿåž‹çš„ç½‘ç»œç»“æž„. 



&lt;center&gt;     &lt;img style=&#34;border-radius: 0.3125em;     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34;      src=&#34;https://cdn.jsdelivr.net/gh/immustard/gallery/pictures/åˆ†å¸ƒå¼å•ç‚¹é—®é¢˜.png&#34; width = &#34;60%&#34; alt=&#34;&#34; onclick=&#34;window.open(this.src)&#34;/&gt;     &lt;br&gt;     &lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9;     display: inline-block;     color: #999;     padding: 2px;&#34;&gt;       æ— çŠ¶æ€å•ç‚¹   	&lt;/div&gt; &lt;/center&gt;

&lt;center&gt;     &lt;img style=&#34;border-radius: 0.3125em;     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34;      src=&#34;https://cdn.jsdelivr.net/gh/immustard/gallery/pictures/æ— çŠ¶æ€å¤šç‚¹.png&#34; width = &#34;60%&#34; alt=&#34;&#34; onclick=&#34;window.open(this.src)&#34;/&gt;     &lt;br&gt;     &lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9;     display: inline-block;     color: #999;     padding: 2px;&#34;&gt;       æ— çŠ¶æ€å¤šç‚¹   	&lt;/div&gt; &lt;/center&gt;



å‚è€ƒä¸Šé¢è¿™ä¸¤ä¸ªå›¾, Proxy æ˜¯ä¸€ä¸ªæ¶ˆæ¯è½¬å‘ä»£ç†, ä¸šåŠ¡è¿›ç¨‹ä¸­çš„æ¶ˆæ¯éƒ½ä¼šç»è¿‡è¯¥ä»£ç†. ä½†ç¬¬ä¸€ä¸ªå›¾ä¸­åªæœ‰ä¸€ä¸ª Proxy, å¦‚æžœè¯¥èŠ‚ç‚¹æŒ‚äº†, é‚£ä¹ˆæ‰€æœ‰ä¸šåŠ¡è¿›ç¨‹éƒ½æ— æ³•è¿›è¡Œé€šä¿¡. ç”±äºŽ Proxy æ˜¯æ— çŠ¶æ€çš„æœåŠ¡, æ‰€ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°ç¬¬äºŒä¸ªå›¾ä¸­çš„è§£å†³æ–¹æ¡ˆ, å¢žåŠ ä¸€ä¸ª Proxy èŠ‚ç‚¹, ä¸¤ä¸ª Proxy èŠ‚ç‚¹æ˜¯å¯¹ç­‰çš„. æ–°å¢žèŠ‚ç‚¹ä¹‹åŽ, ä¸šåŠ¡è¿›ç¨‹éœ€è¦ä¸Žä¸¤ä¸ª Proxy ä¹‹é—´å¢žåŠ ä¸€ä¸ªå¿ƒè·³çš„æœºåˆ¶, ä¸šåŠ¡è¿›ç¨‹åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™æ ¹æ® Proxy çš„çŠ¶æ€, é€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„ Proxy è¿›è¡Œæ¶ˆæ¯ä¼ é€’. ä»Žè´Ÿè½½å‡è¡¡çš„è§’åº¦æ¥çœ‹, å¦‚æžœä¸¤ä¸ª Proxy éƒ½æ˜¯å­˜æ´»çŠ¶æ€, ä¸šåŠ¡è¿›ç¨‹åº”å½“éšæœºé€‰æ‹©ä¸€ä¸ª Proxy. 



**è¿™ä¸ªæ–¹æ¡ˆä¸­å­˜åœ¨ä»€ä¹ˆé—®é¢˜?**

æ¶ˆæ¯çš„é¡ºåºæ€§é—®é¢˜. ä¸€èˆ¬æ¥è¯´, ä¸šåŠ¡çš„æ¶ˆæ¯éƒ½æ˜¯å‘é€ã€åº”ç­”, å†å‘é€ã€å†åº”ç­”è¿™æ ·çš„é¡ºåºè¿›è¡Œçš„, åœ¨ä¸šåŠ¡ä¸­å¯ä»¥ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§. ä½†æ˜¯åœ¨å®žé™…çš„ä¸šåŠ¡ä¸­, è¿™ä¸ªæ–¹æ¡ˆä¸èƒ½ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§. æ¯”å¦‚ `ä¸šåŠ¡è¿›ç¨‹ 1` å‘ `ä¸šåŠ¡è¿›ç¨‹ 3` å‘é€ `æ¶ˆæ¯ A` å’Œ `æ¶ˆæ¯ B`, å¦‚æžœåœ¨å‘é€ `æ¶ˆæ¯ A` çš„æ—¶å€™é€‰æ‹©äº† `Proxy 1`, åœ¨å‘é€ `æ¶ˆæ¯ B` æ—¶é€‰æ‹©äº† `Proxy 2`, åœ¨åˆ†å¸ƒå¼çš„çŽ¯å¢ƒä¸­, å°±ä¸èƒ½ç¡®ä¿ `æ¶ˆæ¯ A` ä¸€å®šæ¯” `æ¶ˆæ¯ B` ä¼˜å…ˆåˆ°è¾¾. 

**æ€Žä¹ˆè§£å†³?**

å…¶å®žè§£å†³ä¹Ÿæ¯”è¾ƒç®€å•, å¯¹äºŽè¿™ç±»å¯¹æ¶ˆæ¯é¡ºåºæœ‰è¦æ±‚çš„ä¸šåŠ¡, å¯ä»¥æŒ‡å®šå¯¹åº”çš„ Proxy è¿›è¡Œå‘é€. æ¯”å¦‚ `æ¶ˆæ¯ A` å’Œ `æ¶ˆæ¯ B` éƒ½ä½¿ç”¨ `Proxy 1` è¿›è¡Œå‘é€, è¿™æ ·å°±èƒ½ä¿è¯æ¶ˆæ¯çš„é¡ºåº. 



## æœ‰çŠ¶æ€æœåŠ¡çš„å•ç‚¹é—®é¢˜

&gt; æœ‰çŠ¶æ€æœåŠ¡: 
&gt;
&gt; æœåŠ¡ç«¯ä¼šå­˜å‚¨è¯·æ±‚ä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä¿¡æ¯, å…ˆåŽçš„è¯·æ±‚æ˜¯å¯ä»¥æœ‰å…³è”çš„. æ¯”å¦‚ session ç­‰. 

å¦‚æžœåœ¨æž¶æž„ä¸­, æœ‰ä¸ªèŠ‚ç‚¹æ˜¯å•ç‚¹çš„å¹¶ä¸”æ˜¯æœ‰çŠ¶æ€çš„, é‚£ä¹ˆé¦–å…ˆè€ƒè™‘çš„æ˜¯è¯¥èŠ‚ç‚¹æ˜¯å¦å¯ä»¥åŽ»çŠ¶æ€, å¦‚æžœå¯ä»¥, åˆ™ä¼˜å…ˆé€‰æ‹©åŽ»é™¤çŠ¶æ€çš„æ–¹æ¡ˆ (æ¯”å¦‚æŠŠçŠ¶æ€å­˜å‚¨åˆ°åŽç«¯çš„å¯é  DB ä¸­, å¯èƒ½å­˜åœ¨æ€§èƒ½çš„æŸè€—), ç„¶åŽå°±é€€åŒ–æˆä¸€ä¸ªæ— çŠ¶æ€æœåŠ¡çš„å•ç‚¹é—®é¢˜äº†. 

ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯å¯ä»¥åŽ»çŠ¶æ€çš„, æ¯”å¦‚å¯¹äºŽä¸€äº›ä¸šåŠ¡åªèƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸­è¿›è¡Œå¤„ç†, å¦‚æžœåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸­å¤„ç†çš„è¯å¯èƒ½é€ æˆçŠ¶æ€çš„ä¸ä¸€è‡´, è¿™ç±»åž‹çš„ä¸šåŠ¡æ˜¯æ— æ³•åŽ»é™¤çŠ¶æ€çš„. 

&lt;center&gt;     &lt;img style=&#34;border-radius: 0.3125em;     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34;      src=&#34;https://cdn.jsdelivr.net/gh/immustard/gallery/pictures/202309191355178.png&#34; width = &#34;60%&#34; alt=&#34;&#34; onclick=&#34;window.open(this.src)&#34;/&gt;     &lt;br&gt;     &lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9;     display: inline-block;     color: #999;     padding: 2px;&#34;&gt;       ç®€å•ä¸»å¤‡   	&lt;/div&gt; &lt;/center&gt;



ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯å¢žåŠ ä¸€ä¸ªå¤‡ç”¨èŠ‚ç‚¹, å¤‡ç”¨èŠ‚ç‚¹å’Œä¸šåŠ¡è¿›ç¨‹ä¹Ÿå¯ä»¥è¿›è¡Œé€šä¿¡, ä½†æ˜¯æ‰€æœ‰çš„ä¸šåŠ¡æ¶ˆæ¯éƒ½å‘å¾€ Master èŠ‚ç‚¹è¿›è¡Œå¤„ç†. Master èŠ‚ç‚¹å’Œ Slave èŠ‚ç‚¹ä¹‹é—´é‡‡ç”¨ ping çš„æ–¹å¼è¿›è¡Œé€šä¿¡. Slave èŠ‚ç‚¹ä¼šå®šæ—¶å‘é€ ping åŒ…ç»™ Master èŠ‚ç‚¹, Master èŠ‚ç‚¹æ”¶åˆ°åŽä¼šå“åº”ä¸€ä¸ª Ack åŒ…. å½“ Slave èŠ‚ç‚¹å‘çŽ° Master èŠ‚ç‚¹æ²¡æœ‰å“åº”çš„æ—¶å€™, å°±ä¼šè®¤ä¸º Master èŠ‚ç‚¹æŒ‚äº†, ç„¶åŽæŠŠè‡ªå·±å‡çº§ä¸º Master èŠ‚ç‚¹, å¹¶ä¸”é€šçŸ¥ä¸šåŠ¡è¿›ç¨‹æŠŠæ¶ˆæ¯å‘ç»™è‡ªå·±. 

è¿™ä¸ªæ–¹æ¡ˆçœ‹èµ·æ¥æŒºå®Œç¾Žçš„, å½“ Master å’Œ Slave ä¹‹é—´çš„ç½‘ç»œå‡ºçŽ°é—®é¢˜çš„æ—¶å€™, Slave ä¼šè®¤ä¸º Master æŒ‚äº†, å°±ä¼šå‡çº§ä¸º Master, åŒæ ·ä¼šæ‰§è¡Œ Master çš„ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘, åŒæ ·ä¹Ÿä¼šç”Ÿæˆä¸€äº›ä¸šåŠ¡æ•°æ®å›žå†™åˆ° DB ä¸­. ä½†æ˜¯ Master æ˜¯æ²¡æœ‰æŒ‚çš„, å®ƒåŒæ ·ä¹Ÿåœ¨è¿è¡Œå¯¹åº”çš„ä¸šåŠ¡é€»è¾‘ (å³ä½¿ä¸šåŠ¡è¿›ç¨‹çš„æ¶ˆæ¯æ²¡æœ‰å‘ç»™æ—§çš„ Master äº†), è¿™æ ·å°±ä¼šå‡ºçŽ°ä¸¤ä¸ª Master è¿›è¡Œå†™åŒä¸€ä»½æ•°æ®äº†, é€ æˆæ•°æ®çš„æ··ä¹±, æ‰€ä»¥è¯´, è¿™ä¸ªæ–¹æ¡ˆä¸æ˜¯ä¸€ä¸ªå®Œç¾Žçš„æ–¹æ¡ˆ.



### æ–¹æ¡ˆä¸€: å¼•å…¥ç¬¬ä¸‰æ–¹çš„æœåŠ¡è¿›è¡Œè£å†³

å¯ä»¥å¼•å…¥ ZooKeeper, ç”± ZooKeeper è¿›è¡Œè£å†³. åŒæ ·, å¯ç”¨ä¸¤ä¸ªä¸»èŠ‚ç‚¹, `èŠ‚ç‚¹ A`å’Œ`èŠ‚ç‚¹ B`. å®ƒä»¬å¯åŠ¨ä¹‹åŽå‘ ZooKeeper åŽ»æ³¨å†Œä¸€ä¸ªèŠ‚ç‚¹. å‡è®¾`èŠ‚ç‚¹ A`æ³¨å†Œçš„èŠ‚ç‚¹ä¸º`master001`, `èŠ‚ç‚¹ B`æ³¨å†Œçš„èŠ‚ç‚¹ä¸º`master002`, æ³¨å†Œå®ŒæˆåŽè¿›è¡Œé€‰ä¸¾, ç¼–å·å°çš„èŠ‚ç‚¹ä¸ºçœŸæ­£çš„èŠ‚ç‚¹. é‚£ä¹ˆ, é€šè¿‡è¿™ç§æ–¹å¼å°±å®Œæˆäº†å¯¹ä¸¤ä¸ª Master è¿›ç¨‹çš„è°ƒåº¦. 

&lt;center&gt;     &lt;img style=&#34;border-radius: 0.3125em;     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34;      src=&#34;https://cdn.jsdelivr.net/gh/immustard/gallery/pictures/202309191432028.png&#34; width = &#34;85%&#34; alt=&#34;&#34; onclick=&#34;window.open(this.src)&#34;/&gt;     &lt;br&gt;     &lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9;     display: inline-block;     color: #999;     padding: 2px;&#34;&gt;       ZooKeeper æ‰˜ç®¡ä¸»èŠ‚ç‚¹   	&lt;/div&gt; &lt;/center&gt;



### æ–¹æ¡ˆäºŒ: é€šè¿‡é€‰ä¸¾ç®—æ³•å’Œç§Ÿçº¦çš„æ–¹å¼å®žçŽ° Master çš„é€‰ä¸¾

å¯¹äºŽæ–¹æ¡ˆä¸€çš„ç¼ºç‚¹ä¸»è¦å¤šç»´æŠ¤ä¸€å¥— ZooKeeper çš„æœåŠ¡, å¦‚æžœåŽŸæœ¬ä¸šåŠ¡ä¸Šå¹¶æ²¡æœ‰éƒ¨ç½²è¯¥æœåŠ¡çš„è¯, è¦å¢žåŠ è¯¥æœåŠ¡çš„ç»´æŠ¤ä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…. è¿™ä¸ªæ—¶å€™, å¯ä»¥åœ¨ä¸šåŠ¡è¿›ç¨‹ä¸­åŠ å…¥ Master çš„é€‰ä¸¾æ–¹æ¡ˆ. ç›®å‰æœ‰æ¯”è¾ƒæˆç†Ÿçš„é€‰ä¸¾ç®—æ³•, æ¯”å¦‚ Paxos å’Œ Raft. ç„¶åŽå†é…åˆç§Ÿçº¦æœºåˆ¶, å°±å¯ä»¥å®žçŽ° Master çš„é€‰ä¸¾, å¹¶ä¸”ç¡®ä¿å½“å‰åªæœ‰ä¸€ä¸ª Master çš„æ–¹æ¡ˆ. æ¯”å¦‚å¾®ä¿¡çš„ PhxPaxos. 

&lt;center&gt;     &lt;img style=&#34;border-radius: 0.3125em;     box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34;      src=&#34;https://cdn.jsdelivr.net/gh/immustard/gallery/pictures/202309191439350.png&#34; width = &#34;60%&#34; alt=&#34;&#34; onclick=&#34;window.open(this.src)&#34;/&gt;     &lt;br&gt;     &lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9;     display: inline-block;     color: #999;     padding: 2px;&#34;&gt;       Paxos é€‰ä¸¾   	&lt;/div&gt; &lt;/center&gt;

ä¸Šå›¾çš„æ–¹æ¡ˆä¸­, ä¸‰ä¸ªèŠ‚ç‚¹å…¶å®žéƒ½æ˜¯å¯¹ç­‰çš„, é€šè¿‡é€‰ä¸¾ç®—æ³•ç¡®å®šä¸€ä¸ª Master. ä¸ºäº†ç¡®ä¿ä»»ä½•æ—¶å€™éƒ½åªèƒ½å­˜åœ¨ä¸€ä¸ª Master, éœ€è¦åŠ å…¥ç§Ÿçº¦çš„æœºåˆ¶. ä¸€ä¸ªèŠ‚ç‚¹æˆä¸º Master ä¹‹åŽ, Master å’ŒSlave èŠ‚ç‚¹éƒ½ä¼šè¿›è¡Œè®¡æ—¶, åœ¨è¶…è¿‡ç§Ÿçº¦æ—¶é—´åŽ, ä¸‰ä¸ªèŠ‚ç‚¹å¯ä»¥å‘èµ· &#34;æˆ‘è¦æˆä¸º Master&#34; çš„è¯·æ±‚, å¹¶è¿›è¡Œé‡æ–°é€‰ä¸¾. ç”±äºŽä¸‰ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¯¹ç­‰çš„, ä»»ä½•ä¸€ä¸ªéƒ½å¯ä»¥æˆä¸º Master, ä¹Ÿå°±æ˜¯è¯´ç§ŸæœŸè¿‡åŽ, æœ‰å¯èƒ½å‡ºçŽ° Master åˆ‡æ¢çš„æƒ…å†µ, æ‰€ä»¥ä¸ºäº†é¿å… Master çš„é¢‘ç¹åˆ‡æ¢, Master èŠ‚ç‚¹éœ€è¦æ¯”å…¶ä»–èŠ‚ç‚¹å…ˆå‘èµ·è‡ªå·±è¦æˆä¸º Master çš„è¯·æ±‚ (ç»­ç§Ÿ), å‘Šè¯‰å…¶ä»–èŠ‚ç‚¹æˆ‘è¦ç»§ç»­æˆä¸º Master, ç„¶åŽå¦å¤–çš„èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚åŽä¼šè¿›è¡Œåº”ç­”, æ­£å¸¸æƒ…å†µä¸‹å¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹ä¼šåŒæ„è¯¥è¯·æ±‚. å…³é”®ç‚¹å°±æ˜¯, åœ¨ç§Ÿçº¦è¿‡æœŸä¹‹å‰, Slave èŠ‚ç‚¹ä¸èƒ½å‘èµ· &#34;æˆ‘è¦æˆä¸º Master&#34; çš„è¯·æ±‚, è¿™æ ·å°±å¯ä»¥è§£å†³ Master é¢‘ç¹åˆ‡æ¢çš„é—®é¢˜. 



## å¸¸è§å®¹é”™æœºåˆ¶

### Fail-Over: å¤±æ•ˆè½¬ç§»

æ˜¯ä¸€ç§å¤‡ä»½æ“ä½œæ¨¡å¼, å½“ä¸»è¦ç»„ä»¶å¼‚å¸¸æ—¶, å…¶åŠŸèƒ½è½¬ç§»åˆ°å¤‡ä»½ç»„ä»¶. å…¶è¦ç‚¹åœ¨äºŽæœ‰ä¸»æœ‰å¤‡, ä¸”ä¸»æ•…éšœæ—¶å¤‡å¯å¯ç”¨, å¹¶è®¾ç½®ä¸ºä¸». 

ðŸŒ°: MySQL çš„åŒ Master æ¨¡å¼, å½“æ­£åœ¨ä½¿ç”¨çš„ Master å‡ºçŽ°æ•…éšœæ—¶, å¯ä»¥æ‹¿å¤‡ Master åšä¸»ä½¿ç”¨. 



### Fail-Back: å¤±æ•ˆè‡ªåŠ¨æ¢å¤

`Fail-Over`ä¹‹åŽçš„è‡ªåŠ¨æ¢å¤, åœ¨ç°‡ç½‘ç»œç³»ç»Ÿ (æœ‰ä¸¤å°æˆ–å¤šå°æœåŠ¡å™¨äº’è”çš„ç½‘ç»œ) ä¸­, ç”±äºŽè¦æŸå°æœåŠ¡å™¨è¿›è¡Œç»´ä¿®, éœ€è¦ç½‘ç»œèµ„æºå’ŒæœåŠ¡æš‚æ—¶é‡å®šå‘åˆ°å¤‡ç”¨ç³»ç»Ÿ. åœ¨æ­¤ä¹‹åŽå°†ç½‘ç»œèµ„æºå’ŒæœåŠ¡å™¨æ¢å¤ä¸ºç”±åŽŸå§‹ä¸»æœºæä¾›çš„è¿‡ç¨‹, ç§°ä¸ºè‡ªåŠ¨æ¢å¤. 

ðŸŒ°: MySQL çš„åŒ Master æ¨¡å¼, å½“ Master æ•…éšœ, åœ¨ Fail-Over è‡³å¤‡ Master, å½“ä¸» Master æ¢å¤ä¹‹åŽ, åˆ™è‡ªåŠ¨åˆ‡æ¢è‡³ä¸» Master. 



### Fail-Fast: å¿«é€Ÿå¤±è´¥

å°½å¯èƒ½çš„å‘çŽ°ç³»ç»Ÿä¸­çš„é”™è¯¯, ä½¿ç³»ç»Ÿèƒ½å¤ŸæŒ‰ç…§äº‹å…ˆè®¾å®šå¥½çš„é”™è¯¯çš„æµç¨‹æ‰§è¡Œ, å¯¹åº”çš„æ–¹å¼æ˜¯ `Fault-Tolerant`(é”™è¯¯å®¹å¿). 

ðŸŒ°: ä»¥ Java é›†åˆ (Collection) çš„å¿«é€Ÿå¤±è´¥ä¸ºä¾‹, å½“å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆçš„å†…å®¹è¿›è¡Œæ“ä½œæ—¶, å°±å¯èƒ½ä¼šäº§ç”Ÿ `Fail-Fast` äº‹ä»¶. å½“æŸä¸€ä¸ª çº¿ç¨‹A é€šè¿‡ `iterator` åŽ»éåŽ†æŸé›†åˆçš„è¿‡ç¨‹ä¸­, è‹¥è¯¥é›†åˆçš„å†…å®¹è¢«å…¶ä»–çº¿ç¨‹æ‰€æ”¹å˜äº†; é‚£ä¹ˆ çº¿ç¨‹A è®¿é—®é›†åˆæ—¶, å°±ä¼šæŠ›å‡º `ConcurrentModificationException` å¼‚å¸¸ (å‘çŽ°é”™è¯¯æ‰§è¡Œè®¾å®šå¥½çš„é”™è¯¯çš„æµç¨‹), äº§ç”Ÿ `Fail-Fast` äº‹ä»¶. 



### Fail-Safe: å¤±æ•ˆå®‰å…¨

åœ¨æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿä¸ä¼šé€ æˆä¼¤å®³æˆ–è€…å°½é‡å‡å°‘ä¼¤å®³. 

ðŸŒ°: å†™å…¥ç›‘æŽ§æ—¥å¿—å‡ºé”™æ—¶, ä¸ä¼šå¯¹ä¸»ä¸šåŠ¡çš„æˆè´¥äº§ç”Ÿå½±å“. 



---

> ä½œè€…: Mustard  
> URL: https://buli-home.cn/single_point/  

